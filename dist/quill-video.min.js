!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("quill")):"function"==typeof define&&define.amd?define(["quill"],t):"object"==typeof exports?exports.quillVideo=t(require("quill")):e.quillVideo=t(e.Quill)}(window,(function(e){return function(e){var t=window.webpackHotUpdatequillVideo;window.webpackHotUpdatequillVideo=function(e,r){!function(e,t){if(!x[e]||!w[e])return;for(var r in w[e]=!1,t)Object.prototype.hasOwnProperty.call(t,r)&&(h[r]=t[r]);0==--m&&0===b&&E()}(e,r),t&&t(e,r)};var r,n=!0,o="dd5b6157b94f214a22ed",i={},c=[],d=[];function l(e){var t=k[e];if(!t)return I;var n=function(n){return t.hot.active?(k[n]?-1===k[n].parents.indexOf(e)&&k[n].parents.push(e):(c=[e],r=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),c=[]),I(n)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return I[e]},set:function(t){I[e]=t}}};for(var i in I)Object.prototype.hasOwnProperty.call(I,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(n,i,o(i));return n.e=function(e){return"ready"===u&&p("prepare"),b++,I.e(e).then(t,(function(e){throw t(),e}));function t(){b--,"prepare"===u&&(g[e]||q(e),0===b&&0===m&&E())}},n.t=function(e,t){return 1&t&&(e=n(e)),I.t(e,-2&t)},n}function a(t){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:r!==t,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)n._acceptedDependencies[e[r]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,u){case"idle":(h={})[t]=e[t],p("ready");break;case"ready":A(t);break;case"prepare":case"check":case"dispose":case"apply":(v=v||[]).push(t)}},check:_,apply:j,status:function(e){if(!e)return u;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){var t=s.indexOf(e);t>=0&&s.splice(t,1)},data:i[t]};return r=void 0,n}var s=[],u="idle";function p(e){u=e;for(var t=0;t<s.length;t++)s[t].call(null,e)}var f,h,y,v,m=0,b=0,g={},w={},x={};function O(e){return+e+""===e?+e:e}function _(e){if("idle"!==u)throw new Error("check() is only allowed in idle status");return n=e,p("check"),(t=1e4,t=t||1e4,new Promise((function(e,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var n=new XMLHttpRequest,i=I.p+""+o+".hot-update.json";n.open("GET",i,!0),n.timeout=t,n.send(null)}catch(e){return r(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)r(new Error("Manifest request to "+i+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)r(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(e){return void r(e)}e(t)}}}))).then((function(e){if(!e)return p(D()?"ready":"idle"),null;w={},g={},x=e.c,y=e.h,p("prepare");var t=new Promise((function(e,t){f={resolve:e,reject:t}}));h={};return q(0),"prepare"===u&&0===b&&0===m&&E(),t}));var t}function q(e){x[e]?(w[e]=!0,m++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=I.p+""+e+"."+o+".hot-update.js",document.head.appendChild(t)}(e)):g[e]=!0}function E(){p("ready");var e=f;if(f=null,e)if(n)Promise.resolve().then((function(){return j(n)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var r in h)Object.prototype.hasOwnProperty.call(h,r)&&t.push(O(r));e.resolve(t)}}function j(t){if("ready"!==u)throw new Error("apply() is only allowed in ready status");return function t(n){var d,l,a,s,u;function f(e){for(var t=[e],r={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var o=n.pop(),i=o.id,c=o.chain;if((s=k[i])&&(!s.hot._selfAccepted||s.hot._selfInvalidated)){if(s.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:i};if(s.hot._main)return{type:"unaccepted",chain:c,moduleId:i};for(var d=0;d<s.parents.length;d++){var l=s.parents[d],a=k[l];if(a){if(a.hot._declinedDependencies[i])return{type:"declined",chain:c.concat([l]),moduleId:i,parentId:l};-1===t.indexOf(l)&&(a.hot._acceptedDependencies[i]?(r[l]||(r[l]=[]),m(r[l],[i])):(delete r[l],t.push(l),n.push({chain:c.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];-1===e.indexOf(n)&&e.push(n)}}D();var b={},g=[],w={},_=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var q in h)if(Object.prototype.hasOwnProperty.call(h,q)){var E;u=O(q),E=h[q]?f(u):{type:"disposed",moduleId:q};var j=!1,A=!1,P=!1,H="";switch(E.chain&&(H="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":n.onDeclined&&n.onDeclined(E),n.ignoreDeclined||(j=new Error("Aborted because of self decline: "+E.moduleId+H));break;case"declined":n.onDeclined&&n.onDeclined(E),n.ignoreDeclined||(j=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+H));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(E),n.ignoreUnaccepted||(j=new Error("Aborted because "+u+" is not accepted"+H));break;case"accepted":n.onAccepted&&n.onAccepted(E),A=!0;break;case"disposed":n.onDisposed&&n.onDisposed(E),P=!0;break;default:throw new Error("Unexception type "+E.type)}if(j)return p("abort"),Promise.reject(j);if(A)for(u in w[u]=h[u],m(g,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,u)&&(b[u]||(b[u]=[]),m(b[u],E.outdatedDependencies[u]));P&&(m(g,[E.moduleId]),w[u]=_)}var M,S=[];for(l=0;l<g.length;l++)u=g[l],k[u]&&k[u].hot._selfAccepted&&w[u]!==_&&!k[u].hot._selfInvalidated&&S.push({module:u,parents:k[u].parents.slice(),errorHandler:k[u].hot._selfAccepted});p("dispose"),Object.keys(x).forEach((function(e){!1===x[e]&&function(e){delete installedChunks[e]}(e)}));var V,U,B=g.slice();for(;B.length>0;)if(u=B.pop(),s=k[u]){var N={},C=s.hot._disposeHandlers;for(a=0;a<C.length;a++)(d=C[a])(N);for(i[u]=N,s.hot.active=!1,delete k[u],delete b[u],a=0;a<s.children.length;a++){var L=k[s.children[a]];L&&((M=L.parents.indexOf(u))>=0&&L.parents.splice(M,1))}}for(u in b)if(Object.prototype.hasOwnProperty.call(b,u)&&(s=k[u]))for(U=b[u],a=0;a<U.length;a++)V=U[a],(M=s.children.indexOf(V))>=0&&s.children.splice(M,1);p("apply"),void 0!==y&&(o=y,y=void 0);for(u in h=void 0,w)Object.prototype.hasOwnProperty.call(w,u)&&(e[u]=w[u]);var T=null;for(u in b)if(Object.prototype.hasOwnProperty.call(b,u)&&(s=k[u])){U=b[u];var R=[];for(l=0;l<U.length;l++)if(V=U[l],d=s.hot._acceptedDependencies[V]){if(-1!==R.indexOf(d))continue;R.push(d)}for(l=0;l<R.length;l++){d=R[l];try{d(U)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:u,dependencyId:U[l],error:e}),n.ignoreErrored||T||(T=e)}}}for(l=0;l<S.length;l++){var X=S[l];u=X.module,c=X.parents,r=u;try{I(u)}catch(e){if("function"==typeof X.errorHandler)try{X.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:t,originalError:e}),n.ignoreErrored||T||(T=t),T||(T=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:u,error:e}),n.ignoreErrored||T||(T=e)}}if(T)return p("fail"),Promise.reject(T);if(v)return t(n).then((function(e){return g.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return p("idle"),new Promise((function(e){e(g)}))}(t=t||{})}function D(){if(v)return h||(h={}),v.forEach(A),v=void 0,!0}function A(t){Object.prototype.hasOwnProperty.call(h,t)||(h[t]=e[t])}var k={};function I(t){if(k[t])return k[t].exports;var r=k[t]={i:t,l:!1,exports:{},hot:a(t),parents:(d=c,c=[],d),children:[]};return e[t].call(r.exports,r,r.exports,l(t)),r.l=!0,r.exports}return I.m=e,I.c=k,I.d=function(e,t,r){I.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,t){if(1&t&&(e=I(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(I.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)I.d(r,n,function(t){return e[t]}.bind(null,n));return r},I.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(t,"a",t),t},I.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},I.p="",I.h=function(){return o},l(1)(I.s=1)}([function(t,r){t.exports=e},function(e,t,r){e.exports=r(2)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a}));var n=r(0),o=r.n(n);const i=o.a.import("blots/block/embed");class c extends i{static create(e){let t=super.create();return t.setAttribute("src",e.url),t.setAttribute("controls",e.controls),t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("webkit-playsinline",!0),t.setAttribute("playsinline",!0),t.setAttribute("x5-playsinline",!0),t.setAttribute("preload","none"),t}static value(e){return{url:e.getAttribute("src"),controls:e.getAttribute("controls"),width:e.getAttribute("width"),height:e.getAttribute("height")}}}c.blotName="simpleVideo",c.tagName="video";const d=o.a.import("core/module"),l="quill-video-attachment-input";class a extends d{static register(){o.a.register(c,!0)}constructor(e,t={}){super(e,t),this.buildVideoBtn()}buildVideoBtn(){const e=document.getElementsByClassName("ql-formats");let t=document.createElement("button");t.type="button",t.className="ql-attachment",t.innerHTML='<svg viewBox="0 0 18 18"> <rect class="ql-stroke" height="12" width="12" x="3" y="3"></rect> <rect class="ql-fill" height="12" width="1" x="5" y="3"></rect> <rect class="ql-fill" height="12" width="1" x="12" y="3"></rect> <rect class="ql-fill" height="2" width="8" x="5" y="8"></rect> <rect class="ql-fill" height="1" width="3" x="3" y="5"></rect> <rect class="ql-fill" height="1" width="3" x="3" y="7"></rect> <rect class="ql-fill" height="1" width="3" x="3" y="10"></rect> <rect class="ql-fill" height="1" width="3" x="3" y="12"></rect> <rect class="ql-fill" height="1" width="3" x="12" y="5"></rect> <rect class="ql-fill" height="1" width="3" x="12" y="7"></rect> <rect class="ql-fill" height="1" width="3" x="12" y="10"></rect> <rect class="ql-fill" height="1" width="3" x="12" y="12"></rect> </svg>',t.addEventListener("click",()=>{document.getElementById(l).click()}),e[e.length-1].appendChild(t),t=void 0;let r=document.createElement("input");r.type="file",r.accept=".mp4,.flv,.f4v,.webm,.m4v,.mov,.3gp,.3g2,.rm,.rmvb,.wmv,.avi,.asf,.mpg,.mpeg,.mpe,.ts,.div,.dv,.divx,.vob,.dat,.mkv,.swf,.lavf,.cpk,.dirac,.ram,.qt,.fli,.flc,.mod,.ogv,.ogg",r.id=l,r.style.display="none",r.addEventListener("change",e=>{this.uploadVideo(e.target.files)}),e[e.length-1].appendChild(r),r=void 0}uploadVideo(e){const{upload:t}=this.options;t&&"function"==typeof t?t():console.error("上传视频方法未定义")}insert(e){const t=this.quill.getSelection();this.quill.insertEmbed(null!==t?t.index:0,"simpleVideo",{url:e,controls:"controls",width:"30%",height:"30%"}),document.getElementById(l).value=""}}}]).default}));